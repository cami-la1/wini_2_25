//---------------------------------------------------------------------------

#pragma hdrstop

#include "UC_puntero.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
	ptr_cola::  ptr_cola() {
		  ini=nullptr;
		  fin=nullptr;
          cant=0;
									 }
	bool ptr_cola::vacio() {
        return (cant == 0);
    }

	int ptr_cola:: recupera(Nodopc* d) {
        if (!vacio()) {
            return d->dato;
        } else {
            return -1;
        }
    }

	Nodopc* ptr_cola::primero() {
        if (!vacio()) {
            return ini;
        } else {
            return nullptr;
        }
    }

	Nodopc* ptr_cola::ultimo() {
        if (vacio()) {
            return nullptr;
        } else {
            return fin;
        }
    }

	void ptr_cola::Meter(int e) {
		Nodopc* x = new Nodopc;
        if (x != nullptr) {
            x->dato = e;
            x->sig = nullptr;
            if (vacio()) {
                ini = x;
                fin = x;
            } else {
                fin->sig = x;
                fin = x;
            }
            cant++;
        }
    }

	void ptr_cola::Sacar(int &e) {
        if (!vacio()) {
            Nodopc* p = primero();
            e = recupera(p);
            ini = p->sig;
            delete p;
            cant--;
            if (vacio()) {
                fin = nullptr;
            }
        }
    }

	int ptr_cola::frente() {
        return recupera(primero());
    }

    int ptr_cola::final() {
        return recupera(ultimo());
    }

  void Pintado(int posX, int posY, String cad, TColor color, TCanvas *Canvas){
int TamanoCelda = 35;
int TamanoCeldaX = 80;
int TamanoCeldaY = 35;
	//           x1  y1    x2                   y2
	TRect rect(posX,posY,posX+TamanoCeldaX,posY+TamanoCeldaY);
	Canvas->Brush->Color = color;
	Canvas->FillRect(rect);

	Canvas->TextOutW(posX,posY+3,cad);

}
void ptr_cola::imprimir(TColor FormColor, TCanvas *Canvas){
    int TamanoCelda = 35;
    int TamanoCeldaX = 80;
    int TamanoCeldaY = 35;

	int posX = 500;
	int posY = 1100;
    int auxX = posX;
    int auxY = posY;

    if (!vacio()) {
        // Draw header
        Pintado(posX, posY, "cola", FormColor, Canvas);
        posX = auxX;
        posY += TamanoCeldaY;

        Nodopc* x = primero();
        Pintado(posX, posY, "< ", FormColor, Canvas);
        posX += 40;
        while (x != nullptr){
            Pintado(posX, posY, IntToStr(x->dato), FormColor, Canvas);
            posX += 80;
            x = x->sig;
            if (x != nullptr) {
                Pintado(posX, posY, ",", FormColor, Canvas);
                posX += 40;
            }
        }
        Pintado(posX, posY, ">", FormColor, Canvas);
        posX += 40;
    } else {
		Pintado(posX, posY, "cola vacia", FormColor, Canvas);
        posX = auxX;
        posY += TamanoCeldaY;
    }
}

